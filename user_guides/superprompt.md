# SuperPrompt Integration
Superprompt is a prompt model that has been integrated into One Button Prompt. It is One Button Prompts take on this model, and is not a standalone implementation.

What is does, is generate longer, more readable prompts, while still being attached the One Button Prompt framework. It passes the generated subject of One Button Prompt into Superprompt, but it keeps all the other stylings generated in the process.

It also uses insanitylevel as expected. Lenght and variety increased per level. From level 9 and 10, prompts can get really crazy and spout nonsense. As it should.

If you just want to play with SuperPrompt, you can set the imagetype to __"subject only mode"__. This way, it will not add any stylings from One Button Prompt.

## Example
![2024-03-31_16-28-41_8345](https://github.com/AIrjen/OneButtonPrompt/assets/130234949/cd7f5cfe-5873-453f-b09e-e0e6f3e1bdf2)
> D&D style portrait, fantasy, stylized by Jeremy Dale, digital art, **The portrait depicts a woman with long brown hair and piercing green eyes. She wears a flowing white dress that contrasts beautifully against the dark background of her features. Her arms are outstretched**, Wide view, Evil, side light, freckles, detailed face

![2024-03-31_21-56-20_3113](https://github.com/AIrjen/OneButtonPrompt/assets/130234949/f948945b-3f93-45cf-b5bd-caf9ad66824e)

> designed by John Ruskin and Koson Ohara, **A lone figure, dressed in a red cape and holding a small bird's eye view of the forest, stands tall on a tree branch. The sun is setting, casting a warm orange glow on the landscape. Raining**, horizon-centered, watercolor, landscapes, architectural studies, detailed observations of nature, delicate, nature-inspired, detailed, traditional
In this example, created with the D&D Portrait preset, you can see the bolded part being generated by Superprompt instead based of a subject determined by One Button Prompt.

## Requirements
If its not working out of the box. Go to the OneButtonPrompt\superprompter\ directory. In here, execute the following command:

`pip install -r requirements.txt`

It needs at least the following pieces installed:
- transformers
- einops
- accelerate
- sentencepiece
- safetensors

It will download the model on first use, it will download into: __\OneButtonPrompt\superprompter\model_files__

### Error on pickled file?

**If you get a __Error verifying pickled file__ issue**: Try and see if it downloaded the model.bin or model.safetensors file in the __\OneButtonPrompt\superprompter\model_files__ directory.

If you have the model.bin file, then remove the model_files directory.

Execute 'pip install safetensors'

Try again.

If that doesn't work, download the safetensors model directly from [this location on hugginface](https://huggingface.co/roborovski/superprompt-v1/tree/main), and place it in the model_files directly instead of the model.bin file.



## How to turn it on in A1111/SD.Next
Under Advanced, go to the setting __Prompt enhancer__, set this to __superprompt-v1__:
![image](https://github.com/AIrjen/OneButtonPrompt/assets/130234949/514ef569-d471-44d6-8fc9-b2a6043f8301)

## How to turn it on in ComfyUI
In ComfyUI, SuperPrompt is available as an option on One Button Prompt and on the One Button Preset nodes:

![image](https://github.com/AIrjen/OneButtonPrompt/assets/130234949/8328d6e2-a931-45f6-9008-4264bda99b80)

However, there is also a One Button SuperPrompt node. This is a different implementation than [NeuralSamurAI](https://github.com/NeuralSamurAI/Comfyui-Superprompt-Unofficial) his node.

It works great in combination with One Button Artify

![image](https://github.com/AIrjen/OneButtonPrompt/assets/130234949/15a7a15e-e048-445a-8ef6-38625ba1af43)

>  art by Richard Corben, a wizard with sparkling green eyes and shimmering silver hair sits in the center of an empty chamber. His long, flowing tail is covered by swirling clouds of dust and water. The air around him crackles with energy as he gazes into his surroundings,, horror and fantasy illustration, detailed and macabre imagery

You can set the styling of the prompt with the superpromptstyle option. All other settings, like tempurature, top_p, etc are controlled by the insanity slider.

## FAQ

#### Help, sometimes it takes very long to get a prompt back, it looks stuck
When using a subject and/or outfit override, it will repeat the prompt generation up to 10 times until it gets all the words that were given. This results in more consistent output, but it can take a while for it to finish some times. Please be patient. It will send out messages that it is retrying.


### Shoutouts
The SuperPrompt-v1 model is developed by Roborovski and can be found at https://huggingface.co/roborovski/superprompt-v1.

Based on sammcj code as a starting point <3 : https://github.com/sammcj/superprompter

See [Brian Fitzgerald's Blog](https://brianfitzgerald.xyz/prompt-augmentation/) for a detailed explanation of the SuperPrompt-v1 model and its capabilities / limitations.
